{% comment %}
  Generic Showcase Wrapper
  
  Parameters:
  - element_id: The ID of the element (matches filename)
  - element_type: The type (atoms, molecules, organisms)
{% endcomment %}

{% assign elements = site.data.elements[include.element_type] %}
{% assign element = elements | where: "id", include.element_id | first %}

{% if element %}
<div class="o-showcase" id="{{ include.element_id }}">
    <h3 class="o-showcase__title">{{ element.title }}</h3>
    <p class="o-showcase__description">{{ element.description }}</p>
    
    {% comment %} Show component dependencies {% endcomment %}
    {% assign component_path = include.element_type | append: "/" | append: include.element_id | append: ".html" %}
    {% case include.element_type %}
        {% when "atoms" %}
            {% comment %} Only show for showcase atoms that use other atoms {% endcomment %}
            {% if include.element_id == "buttons" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="#button" class="a-text-primary-dark">button</a></p>
            {% elsif include.element_id == "labels" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="#tag" class="a-text-primary-dark">tag</a></p>
            {% elsif include.element_id == "logo" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="#logo" class="a-text-primary-dark">logo</a></p>
            {% elsif include.element_id == "social-links" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="#social-link" class="a-text-primary-dark">social-link</a></p>
            {% endif %}
        {% when "molecules" %}
            {% comment %} Always show Gebruikt section for molecules {% endcomment %}
            {% if include.element_id == "blockquote" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#text" class="a-text-primary-dark">text</a></p>
            {% elsif include.element_id == "breadcrumbs" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#link" class="a-text-primary-dark">link</a>, <a href="/atoms#separator" class="a-text-primary-dark">separator</a>, <a href="/atoms#text" class="a-text-primary-dark">text</a></p>
            {% elsif include.element_id == "contact-info" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#heading" class="a-text-primary-dark">heading</a>, <a href="/atoms#icon" class="a-text-primary-dark">icon</a>, <a href="/atoms#link" class="a-text-primary-dark">link</a>, <a href="/atoms#text" class="a-text-primary-dark">text</a></p>
            {% elsif include.element_id == "project-card" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#image" class="a-text-primary-dark">image</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a>, <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a>, <a href="/atoms#tag" class="a-text-primary-dark">tag</a></p>
            {% elsif include.element_id == "page-intro-showcase" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a></p>
            {% elsif include.element_id == "cta" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a>, <a href="/atoms#image" class="a-text-primary-dark">image</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a>, <a href="/atoms#link-showcase" class="a-text-primary-dark">link</a></p>
            {% elsif include.element_id == "map" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <em>geen (pure iframe)</em></p>
            {% elsif include.element_id == "people-card" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#image" class="a-text-primary-dark">image</a>, <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a></p>
            {% elsif include.element_id == "organization-card" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#image" class="a-text-primary-dark">image</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a>, <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a></p>
            {% elsif include.element_id == "text-block-showcase" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a></p>
            {% endif %}
        {% when "organisms" %}
            {% comment %} Always show Gebruikt section for organisms {% endcomment %}
            {% if include.element_id == "footer-showcase" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#logo" class="a-text-primary-dark">logo</a>, <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a>, <a href="/atoms#link-showcase" class="a-text-primary-dark">link</a>, <a href="/atoms#social-link" class="a-text-primary-dark">social-link</a></p>
            {% elsif include.element_id == "hero" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#image-showcase" class="a-text-primary-dark">image</a>, <a href="/atoms#heading-showcase" class="a-text-primary-dark">heading</a>, <a href="/atoms#text-showcase" class="a-text-primary-dark">text</a>, <a href="/atoms#button" class="a-text-primary-dark">button</a></p>
            {% elsif include.element_id == "navigation" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/atoms#logo" class="a-text-primary-dark">logo</a></p>
            {% elsif include.element_id == "project-grid" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/molecules#project-card" class="a-text-primary-dark">project-card</a></p>
            {% elsif include.element_id == "people-grid" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/molecules#people-card" class="a-text-primary-dark">people-card</a></p>
            {% elsif include.element_id == "organization-grid" %}
                <p class="a-text-xs a-text-gray-600 a-mt-1">Gebruikt: <a href="/molecules#organization-card" class="a-text-primary-dark">organization-card</a></p>
            {% endif %}
    {% endcase %}
    
    {% comment %} Include the actual component {% endcomment %}
    {% capture element_path %}{{ include.element_type }}/{{ include.element_id }}.html{% endcapture %}
    {% capture unique_id %}showcase-{{ include.element_type }}-{{ include.element_id }}{% endcapture %}
    
    <div class="o-showcase__container a-relative a-border a-rounded-md a-overflow-hidden">
        {% comment %} Toggle button {% endcomment %}
        <div class="o-showcase__toggle a-absolute a-top-2 a-right-2 a-z-10">
            <button class="a-button a-clickable a-text-xs a-px-3 a-py-1 a-bg-white a-border a-rounded-md"
                    onclick="toggleShowcase('{{ unique_id }}')">
                <span class="toggle-text-{{ unique_id }}">Show Code</span>
            </button>
        </div>
        
        {% comment %} Preview {% endcomment %}
        <div class="o-showcase__preview preview-{{ unique_id }}" id="preview-{{ unique_id }}">
            <div class="a-p-4">
                {% if include.element_id == "navigation-showcase" %}
                    {% comment %} Special case for navigation to avoid conflicts {% endcomment %}
                    {% include organisms/navigation-showcase.html %}
                {% else %}
                    {% include {{ element_path }} %}
                {% endif %}
            </div>
        </div>
        
        {% comment %} Code {% endcomment %}
        <div class="o-showcase__code code-{{ unique_id }} a-hidden" id="code-{{ unique_id }}">
            <div class="a-p-4">
                <pre class="ts-code-block a-text-xs a-m-0"><code>{% capture component_html %}{% include {{ element_path }} %}{% endcapture %}{{ component_html | strip | escape }}</code></pre>
            </div>
        </div>
    </div>
</div>
{% endif %}